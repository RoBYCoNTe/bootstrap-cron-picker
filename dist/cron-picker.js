"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(e){var n=function(){function n(e,t,r){_classCallCheck(this,n),this.wrapper=e,this.hostControl=t,this.settings=r,this._buildControl(),this._setRecurrenceType("Daily")}return _createClass(n,[{key:"_buildControl",value:function(){var n=e("<div>",{class:"cron-picker-container",html:[this._buildRecurrenceTypes(),this._buildDaysOfWeeks(),this._buildTimePicker()]});this.wrapper.append(n)}},{key:"_buildTimePicker",value:function(){var n=this;return e("<div>",{class:"cron-picker-time",html:["Run at:",e("<select>",{html:this._buildOptions(24),class:"form-control cron-picker-hours"}).on("change",function(){return n._buildCronExpression()}),"-",e("<select>",{html:this._buildOptions(60),class:"form-control cron-picker-minutes"}).on("change",function(){return n._buildCronExpression()})]})}},{key:"_buildOptions",value:function(e){return[].concat(_toConsumableArray(Array(e).keys())).map(function(e){return'<option value="'+e+'">'+("0"+e).slice(-2)+"</option>"}).join()}},{key:"_buildRecurrenceTypes",value:function(){return e("<ul>",{class:"nav nav-pills cron-picker-recurrence-types",html:[this._buildRecurrenceType("Daily"),this._buildRecurrenceType("Weekly")]})}},{key:"_buildRecurrenceType",value:function(n){var t=this;return e("<li>",{"data-type":n,html:e("<a>",{text:n}).on("click",function(){return t._setRecurrenceType(n)})})}},{key:"_buildDaysOfWeeks",value:function(){return e("<div>",{class:"cron-picker-dow",html:[this._buildDayOfWeekButton("SUN"),this._buildDayOfWeekButton("MON"),this._buildDayOfWeekButton("TUE"),this._buildDayOfWeekButton("WED"),this._buildDayOfWeekButton("THU"),this._buildDayOfWeekButton("FRI"),this._buildDayOfWeekButton("SAT")]})}},{key:"_buildDayOfWeekButton",value:function(n){var t=this;return e("<button>",{type:"button",class:"btn btn-default btn-sm",text:n}).on("click",function(){e(this).toggleClass("active"),t._buildCronExpression()})}},{key:"_setRecurrenceType",value:function(e){this.wrapper.find("li").removeClass("active"),this.wrapper.find("[data-type="+e+"]").addClass("active"),"Weekly"==e?this.wrapper.find(".cron-picker-dow").removeClass("hidden"):this.wrapper.find(".cron-picker-dow").addClass("hidden"),this._buildCronExpression()}},{key:"_buildCronExpression",value:function(){var e="",n=this.wrapper.find("[data-type].active").data("type"),t=this.wrapper.find(".cron-picker-hours").val(),r=this.wrapper.find(".cron-picker-minutes").val();switch(n){case"Daily":e="0 "+r+" "+t+" 1 * ? *";break;case"Weekly":var i=this.wrapper.find(".cron-picker-dow > button.active");e="0 "+r+" "+t+" ? * "+[].map.call(i,function(e){return e.innerText}).join(",")+" *"}console.log(e)}}]),n}();e.fn.cronPicker=function(t){var r={},i=e.extend({},r,t);this.each(function(t,r){if(r=e(r),"1"!==r.data("cron-picker")){var a=e('\n                <div class="cron-picker">\n                </div>');return r.after(a).hide().data("cron-picker","1"),new n(a,r,i)}})}}(jQuery);